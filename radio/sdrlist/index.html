<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>KiwiSDR.fr - R√©pertoire des R√©cepteurs</title>

    <!-- Open Graph Metadata -->
    <meta property="og:title" content="KiwiSDR.fr | R√©pertoire des R√©cepteurs SDR" />
    <meta property="og:description" content="KiwiSDR.fr - D√©couvrez tous les r√©cepteurs radio mondiaux disponibles." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://kiwisdr.fr/radio/sdrlist/" />
    <meta property="og:image" content="http://kiwisdr.fr/assets/img/og-image.png" />

    <!-- Favicon & Styles -->
    <link rel="icon" type="image/x-icon" href="https://kiwisdr.fr/assets/img/favicon.ico" />
    <link rel="stylesheet" href="https://kiwisdr.fr/assets/css/main.css" />
    
    <!-- i18n System -->
    <script src="../../assets/js/i18n.js"></script>

    <style>
    .language-selector {
        display: flex;
        gap: 0.5em;
        justify-content: center;
        margin-top: 1em;
    }
    
    .lang-btn {
        background: linear-gradient(135deg, rgba(0, 200, 255, 0.15) 0%, rgba(100, 50, 200, 0.1) 100%);
        border: 2px solid rgba(0, 255, 200, 0.2);
        color: #00ffcc;
        padding: 0.5em 1em;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        font-size: 0.9em;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .lang-btn:hover {
        border-color: rgba(0, 255, 200, 0.5);
        box-shadow: 0 4px 15px rgba(0, 200, 255, 0.2);
        transform: translateY(-2px);
    }
    
    .lang-btn.sel {
        background: linear-gradient(135deg, #00ffcc 0%, #00ddff 100%);
        border-color: #00ffcc;
        color: #0a0e27;
        box-shadow: 0 8px 25px rgba(0, 255, 204, 0.4);
        font-weight: 700;
    }

    .main-content {
        display: flex;
        flex-direction: column;
        gap: 2rem;
    }

    .receiver-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
        width: 100%;
    }

    .receiver-card {
        background: linear-gradient(135deg, rgba(0, 200, 255, 0.08) 0%, rgba(100, 50, 200, 0.05) 100%);
        border: 2px solid rgba(0, 255, 200, 0.15);
        border-radius: 15px;
        padding: 1.8em;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
    }

    .receiver-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(0, 255, 200, 0.1), transparent);
        transition: left 0.6s ease;
        pointer-events: none;
    }

    .receiver-card:hover {
        border-color: rgba(0, 255, 200, 0.5);
        background: linear-gradient(135deg, rgba(0, 200, 255, 0.15) 0%, rgba(100, 50, 200, 0.1) 100%);
        box-shadow: 0 8px 32px rgba(0, 200, 255, 0.2),
                    0 0 30px rgba(100, 50, 200, 0.15),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1);
        transform: translateY(-5px);
    }

    .receiver-card:hover::before {
        left: 100%;
    }

    .receiver-card h3 {
        color: #00ffcc;
        margin: 0 0 0.8em 0;
        font-size: 1.3em;
    }

    .receiver-card .type-badge {
        display: inline-block;
        background: rgba(0, 255, 200, 0.2);
        border: 1px solid rgba(0, 255, 200, 0.4);
        color: #00ffcc;
        padding: 0.4em 0.8em;
        border-radius: 8px;
        font-size: 0.85em;
        font-weight: 600;
        margin-bottom: 1em;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .receiver-card p {
        color: #b0e0ff;
        line-height: 1.6;
        margin: 0.8em 0;
        opacity: 0.9;
    }

    .receiver-card a {
        color: #00ddff;
        text-decoration: none;
        transition: all 0.3s ease;
        word-break: break-all;
    }

    .receiver-card a:hover {
        color: #ff33dd;
        text-shadow: 0 0 10px rgba(255, 51, 221, 0.4);
    }

    .header-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 1em;
        justify-content: center;
        margin-top: 1.5em;
    }

    .header-buttons a button {
        background: linear-gradient(135deg, #00ccff 0%, #0066ff 50%, #6600ff 100%);
        color: #fff;
        border: 2px solid rgba(0, 255, 200, 0.3);
        border-radius: 12px;
        padding: 0.9em 2.2em;
        font-size: 0.95em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: 0 8px 25px rgba(0, 150, 255, 0.3),
                    0 0 20px rgba(100, 50, 200, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2);
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .header-buttons a button:hover {
        background: linear-gradient(135deg, #ff33dd 0%, #6600ff 50%, #ff00aa 100%);
        border-color: rgba(255, 51, 221, 0.5);
        box-shadow: 0 12px 35px rgba(255, 51, 221, 0.4),
                    0 0 30px rgba(255, 0, 170, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.3);
        transform: translateY(-3px);
    }

    .header-buttons a button:active {
        transform: translateY(-1px);
    }

    @media (max-width: 768px) {
        .receiver-container {
            grid-template-columns: 1fr;
        }
        
        .header-buttons {
            flex-direction: column;
        }
        
        .header-buttons a button {
            width: 100%;
        }
    }
    </style>

</head>

<body>
    <!-- Header -->
    <header>
        <div class="header-logo">
            <img 
                src="https://kiwisdr.fr/assets/img/og-image.png" 
                alt="KiwiSDR Logo" 
                class="logo"
            />
        </div>

        <div class="header-text">
            <h1>KiwiSDR.fr</h1>
            <p id="sdrlist-subtitle">üì° R√©pertoire Mondial des R√©cepteurs Radio</p>
            <div class="header-buttons">
                <a href="map.html"><button id="sdrlist-button-map">üó∫Ô∏è Acc√©der √† la Carte</button></a>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSc1xr3gKwHyfAEsJC7u8GZuSZ3jr42y97O1Cms3hSVFIfRSbg/viewform?usp=header"><button id="sdrlist-button-add">‚ûï Ajouter un R√©cepteur</button></a>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSeGmPkqnXO7UtCBtLJ_aKveyn7riOyTkfIgwBbH5aeIMcBKow/viewform?usp=header"><button id="sdrlist-button-join">‚ú® Joindre kiwisdr.fr</button></a>
            </div>
            
            <!-- Language Selector -->
            <div class="language-selector">
                <button class="lang-btn sel" onclick="setLanguage('fr')">üá´üá∑ FR</button>
                <button class="lang-btn" onclick="setLanguage('en')">üá¨üáß EN</button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav>
        <a href="http://kiwisdr.fr/" id="nav-home">Accueil</a>
        <a href="#recepteurs" id="nav-receivers">R√©cepteurs</a>
        <a href="map.html" id="nav-map">Carte</a>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Radio Waves Animation -->
        <div class="radio-waves">
            <span></span><span></span><span></span><span></span><span></span>
        </div>

        <section>
            <h2>üì° Liste Compl√®te des R√©cepteurs</h2>
            <div class="radio-dial"></div>
            <div id="receiver-container" class="receiver-container">
                <!-- Les cartes des r√©cepteurs seront g√©n√©r√©es ici -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>
            <span id="footer-text">Cr√©√© par</span> <strong id="footer-studio">Discode Studio</strong> <span id="footer-heart">avec ‚ù§Ô∏è pour la communaut√© radio mondiale</span><br />
            <em id="footer-note">üîó Site ind√©pendant - Aucun lien avec KiwiSDR.com</em>
        </p>
    </footer>

    <script>
        function updateTranslations() {
            // Navigation
            document.getElementById('nav-home').textContent = t('nav_home');
            document.getElementById('nav-receivers').textContent = t('sdrlist_receivers') || 'R√©cepteurs';
            document.getElementById('nav-map').textContent = t('nav_map') || 'Carte';
            
            // Main content
            document.getElementById('sdrlist-button-map').textContent = t('sdrlist_button_map');
            document.getElementById('sdrlist-button-add').textContent = t('sdrlist_button_add');
            document.getElementById('sdrlist-button-join').textContent = t('sdrlist_button_join');
            
            // Footer
            document.getElementById('footer-text').textContent = t('footer_text');
            document.getElementById('footer-studio').textContent = t('footer_studio');
            document.getElementById('footer-heart').textContent = t('footer_heart');
            document.getElementById('footer-note').textContent = t('footer_note');
            
            // Update language button states
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('sel');
            });
            if (getCurrentLanguage() === 'fr') {
                document.querySelectorAll('.lang-btn')[0].classList.add('sel');
            } else {
                document.querySelectorAll('.lang-btn')[1].classList.add('sel');
            }
        }
        
        // Chargement du JSON externe
        fetch("./list.json")
            .then(response => {
                if (!response.ok) throw new Error("Erreur de chargement du fichier JSON");
                return response.json();
            })
            .then(data => {
                const container = document.getElementById("receiver-container");
                container.innerHTML = ""; // On vide avant de remplir

                data.forEach(sdr => {
                    // Cr√©ation d'une carte r√©cepteur
                    const card = document.createElement("div");
                    card.classList.add("receiver-card");

                    // Contenu HTML
                    card.innerHTML = `
                        <h3>üéôÔ∏è ${sdr.name}</h3>
                        <div class="type-badge">${sdr.type.toUpperCase()}</div>
                        <p>
                            <strong>${t('sdrlist_location')} :</strong> ${sdr.location}
                        </p>
                        <p>
                            <strong>${t('sdrlist_access')} :</strong><br/>
                            <a href="${sdr.link}" target="_blank" rel="noopener noreferrer">${sdr.link}</a>
                        </p>
                    `;

                    container.appendChild(card);
                });

                // Message si aucun r√©cepteur
                if (data.length === 0) {
                    container.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: #00ffcc;">Aucun r√©cepteur trouv√© pour le moment.</p>';
                }
                
                // Trigger translation update after loading
                updateTranslations();
            })
            .catch(err => {
                console.error("Erreur :", err);
                document.getElementById("receiver-container").innerHTML = 
                    '<p style="color: #ff3366; text-align: center;">Impossible de charger la liste des r√©cepteurs.</p>';
            });
    </script>
</body>
</html>
