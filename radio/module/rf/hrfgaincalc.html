<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>RF Drive / Gain Calculator (HackRF → PA)</title>
    <meta property="og:title" content="KiwiSDR.fr | HackRF to PA Calculator" />
    <meta property="og:description" content="KiwiSDR.fr - The WorldWide radio related tools website." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://kiwisdr.fr" />
    <meta property="og:image" content="http://kiwisdr.fr/assets/img/og-image.png" />
<style>
  :root{
    --maxw:820px;
    --accent:#0645AD;
    --muted:#6b7280;
    --card:#ffffff;
    --bg:#f3f6fb;
    --glass: rgba(255,255,255,0.6);
    --border: #e6e9ee;
  }
  html,body{height:100%}
  body{
    font-family: Inter, "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(180deg,var(--bg),#eef3fb);
    margin:0;display:flex;align-items:flex-start;justify-content:center;padding:28px;
    color:#111;
  }
  .wrap{
    width:100%;max-width:var(--maxw);background:var(--card);
    border:1px solid var(--border);box-shadow:0 8px 30px rgba(20,30,60,0.06);
    border-radius:12px;padding:20px 22px;
    -webkit-backdrop-filter: blur(6px);backdrop-filter: blur(6px);
  }
  header{display:flex;align-items:center;gap:14px;margin-bottom:12px}
  header .logo{
    width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#1e6fe0);
    display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:20px;box-shadow:0 6px 18px rgba(10,50,120,0.12);
  }
  h1{font-size:18px;margin:0}
  p.lead{margin:6px 0 16px;color:var(--muted);font-size:14px}
  .grid{
    display:grid;grid-template-columns:repeat(2,1fr);gap:12px;
  }
  label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
  input[type=number], select{
    width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:8px;background:white;font-size:14px;
    box-sizing:border-box;
  }
  .controls{display:flex;gap:10px;align-items:center}
  button{
    background:var(--accent);color:#fff;border:0;padding:10px 14px;border-radius:10px;font-weight:600;
    cursor:pointer;box-shadow:0 6px 18px rgba(6,69,173,0.12);
  }
  button.secondary{background:transparent;border:1px solid var(--border);color:#111;box-shadow:none}
  .result{margin-top:14px;padding:14px;border-radius:10px;background:linear-gradient(180deg,var(--glass),#fff);border:1px solid var(--border)}
  .muted{color:var(--muted);font-size:13px}
  .footer{margin-top:16px;border-top:1px dashed var(--border);padding-top:12px;display:flex;justify-content:space-between;align-items:center;font-size:13px;color:var(--muted)}
  @media (max-width:720px){
    .grid{grid-template-columns:1fr}
    header{gap:10px}
    .logo{width:46px;height:46px;font-size:18px}
  }
</style>
</head>
<body>
  <main class="wrap" role="main">
    <header>
      <div class="logo">RF</div>
      <div>
        <h1>RF Drive / Gain Calculator for HackRF</h1>
        <p class="lead">Quick calculator for estimating required driver/preamp gain between an SDR (e.g. HackRF) and a power amplifier (PA).</p>
      </div>
    </header>

    <section aria-labelledby="calc">
      <div class="grid">
        <div>
          <label for="hackrf">HackRF output (dBm)</label>
          <input id="hackrf" type="number" value="5" step="0.1" inputmode="numeric" />

          <label for="driver" style="margin-top:10px">Driver gain (dB)</label>
          <input id="driver" type="number" value="16" step="0.1" />

          <label for="preamp" style="margin-top:10px">Preamp / additional stage gain (dB)</label>
          <input id="preamp" type="number" value="0" step="0.1" />
        </div>

        <div>
          <label for="pa_in">PA required input (dBm)</label>
          <input id="pa_in" type="number" value="30" step="0.1" />

          <label for="notes" style="margin-top:10px">Notes / extra settings</label>
          <select id="notes">
            <option value="none">No extra</option>
            <option value="attenuator">Add variable attenuator between stages</option>
            <option value="use_dummy_load">Remember: test into dummy load</option>
            <option value="lp_filter">Insert low-pass filter before PA</option>
          </select>

          <div style="margin-top:12px" class="controls">
            <button id="calcBtn">Calculate</button>
            <button id="resetBtn" class="secondary">Reset</button>
          </div>
        </div>
      </div>

      <div id="out" class="result muted" aria-live="polite" style="min-height:78px;margin-top:14px">
        Click <strong>Calculate</strong> to show results.
      </div>

      <div class="footer">
        <div>Output: <span id="summary">—</span></div>
        <div class="muted">Keep power &amp; legality in mind.</div>
      </div>
    </section>
  </main>

<script>
(function(){
  const $ = id => document.getElementById(id);
  const out = $('out');
  const summary = $('summary');

  function formatDb(n){ return (Math.round(n*10)/10).toFixed(1) + ' dBm' }

  function calc(){
    const hack = Number($('hackrf').value) || 0;
    const drv  = Number($('driver').value)  || 0;
    const pre  = Number($('preamp').value)  || 0;
    const need = Number($('pa_in').value)   || 0;

    const afterDriver = hack + drv;
    const afterPre = afterDriver + pre;
    const missing = need - afterPre;
    const lines = [
      `HackRF output: <strong>${formatDb(hack)}</strong>`,
      `After driver (+${drv} dB): <strong>${formatDb(afterDriver)}</strong>`,
      `After preamp (+${pre} dB): <strong>${formatDb(afterPre)}</strong>`,
      `PA required input: <strong>${formatDb(need)}</strong>`
    ];

    if(missing <= 0){
      lines.push(`<span style="color:green;font-weight:600">OK — sufficient drive. Margin: ${Math.abs(missing).toFixed(1)} dB</span>`);
    } else {
      lines.push(`<span style="color:#b85b00;font-weight:600">Not enough drive — you need +${missing.toFixed(1)} dB more (add stage or higher-gain driver)</span>`);
    }

    lines.push(`<div style="margin-top:8px;font-size:13px;color:#4b5563">Tip: use a variable attenuator and test into a dummy load with a wattmeter before connecting antenna.</div>`);

    out.innerHTML = lines.join('<br>');
    summary.textContent = `${formatDb(afterPre)} output`;
  }

  $('calcBtn').addEventListener('click', calc);
  $('resetBtn').addEventListener('click', function(){
    $('hackrf').value = 5;
    $('driver').value = 16;
    $('preamp').value = 0;
    $('pa_in').value = 30;
    out.innerHTML = 'Click <strong>Calculate</strong> to show results.';
    summary.textContent = '—';
  });

  // auto-calc on Enter inside inputs
  ['hackrf','driver','preamp','pa_in'].forEach(id=>{
    $(id).addEventListener('keydown', function(e){
      if(e.key === 'Enter'){ e.preventDefault(); calc(); }
    });
  });
})();
</script>
</body>
</html>
